import{o as e,c as t,a as s,p as l,b as a,u as n,r as o,d as r,T as c,w as i,e as d,i as u,f as m,g as p,t as h,h as v,j as w,v as b,F as g,k as f,l as y,m as x,n as k,q as S,s as M,x as C,y as P,z as V,A as q,B,C as z}from"./vendor.bb135a69.js";const L={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 576 512"},R=s("path",{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46s46-20.595 46-46s-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",fill:"currentColor"},null,-1);var T={render:function(s,l){return e(),t("svg",L,[R])}};const A=i();l("data-v-f211a0be");const H=d("Something went wrong");a();const O={expose:[],props:{type:String,modelValue:Boolean},emits:["update:modelValue"],setup(l,{emit:a}){const i=l;return(d,u)=>(e(),t(c,{name:"alert"},{default:A((()=>[l.modelValue?(e(),t("div",{key:0,class:["alert alert-dismissible d-flex align-items-center",["alert-"+n(i).type]]},[o(d.$slots,"default",{},(()=>[H]),{}),s("button",{type:"button",class:"btn-close",onClick:u[1]||(u[1]=e=>a("update:modelValue",!1))})],2)):r("",!0)])),_:3}))},__scopeId:"data-v-f211a0be"},I={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},_=s("path",{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7c22.4 17.4 52.1 39.5 154.1 113.6c21.1 15.4 56.7 47.8 92.2 47.6c35.7.3 72-32.8 92.3-47.6c102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4c132.7-96.3 142.8-104.7 173.4-128.7c5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9c30.6 23.9 40.7 32.4 173.4 128.7c16.8 12.2 50.2 41.8 73.4 41.4z",fill:"currentColor"},null,-1);var F={render:function(s,l){return e(),t("svg",I,[_])}};const U={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},Y=s("path",{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176C160 78.798 238.797.001 335.999 0C433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48s-21.49-48-48-48s-48 21.49-48 48z",fill:"currentColor"},null,-1);var E={render:function(s,l){return e(),t("svg",U,[Y])}};const $={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},j=s("path",{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z",fill:"currentColor"},null,-1);var D={render:function(s,l){return e(),t("svg",$,[j])}};const N={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},W=s("path",{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z",fill:"currentColor"},null,-1);var J={render:function(s,l){return e(),t("svg",N,[W])}};const G={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},X=s("path",{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z",fill:"currentColor"},null,-1);var K={render:function(s,l){return e(),t("svg",G,[X])}};const Q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},Z=s("path",{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14c-11.1-35.6-30-67.8-54.7-94.6c-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7c-36.7-8.2-74.3-7.8-109.2 0c-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3c-24.7 26.7-43.6 58.9-54.7 94.6c-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14c11.1 35.6 30 67.8 54.7 94.6c3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7c36.7 8.2 74.3 7.8 109.2 0c5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3c24.7-26.7 43.6-58.9 54.7-94.6c1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80s80 35.9 80 80s-35.9 80-80 80z",fill:"currentColor"},null,-1);var ee={render:function(s,l){return e(),t("svg",Q,[Z])}};const te={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},se=s("path",{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z",fill:"currentColor"},null,-1);var le={render:function(s,l){return e(),t("svg",te,[se])}};const ae=s("image",{href:"/assets/court.7a70df28.png",width:"100%",height:"100%"},null,-1),ne={expose:[],props:{showCircle:{type:Boolean}},emits:["click"],setup(s,{emit:l}){const a=u("activePlayerList"),o=m(null),c=u("courtWidth"),i=u("courtHeight");function d(e){var t=e.target.getBoundingClientRect();!function(e,t,s){t/=parseInt(e.getPropertyValue("width")),s/=parseInt(e.getPropertyValue("height")),p.x=Math.round(100*t),p.y=Math.round(50*s),l("click")}(getComputedStyle(o.value),e.clientX-t.left,e.clientY-t.top)}const p=u("newShot");return(l,u)=>(e(),t("div",null,[(e(),t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${n(c)} ${n(i)}`,ref:o,onClick:d,style:{cursor:0==n(a).length?"not-allowed":"crosshair"}},[ae,s.showCircle?(e(),t("circle",{key:0,cx:n(p).x/100*n(c),cy:n(p).y/50*n(i),r:"15",fill:"var(--bs-primary)",class:"pe-none"},null,8,["cx","cy"])):r("",!0)],12,["viewBox"]))]))}},oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 640 512"},re=s("path",{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z",fill:"currentColor"},null,-1);var ce={render:function(s,l){return e(),t("svg",oe,[re])}};const ie={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 640 512"},de=s("path",{d:"M624 208H432c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z",fill:"currentColor"},null,-1);var ue={render:function(s,l){return e(),t("svg",ie,[de])}};const me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},pe=s("path",{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",fill:"currentColor"},null,-1);var he={render:function(s,l){return e(),t("svg",me,[pe])}};const ve={class:"col-md-6"},we={class:"border bg-white p-1 clearfix rounded shadow-sm"},be={class:"lead"},ge=d(" Points: "),fe={key:0},ye=d(" Shots: made "),xe=d(" out of "),ke={key:1},Se=d("Shots: "),Me=s("b",{class:"text-muted"},"None",-1),Ce={class:"btn-group float-end"},Pe={key:0,class:"spinner-border spinner-border-sm"},Ve={expose:[],props:{name:String,id:Number,index:Number,shots:Array},setup(l){const a=l,o=u("state"),r=u("apiCall"),c=u("activePlayerList"),i=p((function(){let e={total:0,shots:0,madeShots:0};for(let t of a.shots)e.shots++,t.missed||(e.madeShots++,e.total+=t.points);return e})),d=p((()=>o.players[a.index]));async function m(){await r(`/players/${a.id}`,{method:"DELETE"}),o.players.splice(a.index,1)}function v(){d.value.active=!d.value.active}return(a,r)=>{const u=ue,p=he;return e(),t("div",ve,[s("div",we,[s("span",be,h(l.name),1),s("div",null,[ge,s("b",null,h(n(i).total),1)]),n(i).shots>0?(e(),t("div",fe,[ye,s("b",null,h(n(i).madeShots),1),xe,s("b",null,h(n(i).shots),1)])):(e(),t("div",ke,[Se,Me])),s("div",Ce,[s("button",{disabled:n(o).requestPending,class:"btn btn-danger",onClick:m,title:"Delete "+l.name},[n(o).requestPending==`DELETE /players/${l.id}`?(e(),t("span",Pe)):(e(),t(u,{key:1}))],8,["disabled","title"]),s("button",{class:["btn",n(d).active?"btn-success":"btn-secondary"],disabled:n(o).requestPending||n(c).length>=5&&!n(d).active,onClick:v,title:n(d).active?"Activate":"Deactivate"},[s(p)],10,["disabled","title"])])])])}}},qe={class:"modal fade"},Be={class:"modal-dialog"},ze={class:"modal-content"},Le=s("div",{class:"modal-header bg-secondary text-white"},[s("h5",{class:"modal-title"},"Record Shot")],-1),Re={class:"modal-body"},Te=s("p",{class:"text-primary text-center"},"The red circle shows where the shot was made from.",-1),Ae=s("b",null,"Game ID",-1),He=s("div",{class:"form-text"},"TODO: select game from dropdown",-1),Oe=s("hr",null,null,-1),Ie=s("b",null,"Which player threw the shot?",-1),_e=s("hr",null,null,-1),Fe=s("b",null,"What kind of shot was it?",-1),Ue={class:"row"},Ye={class:"col-12 col-md-auto"},Ee={class:"form-check"},$e=s("label",{for:"shotRadioFreeThrow",class:"form-check-label"},"Free throw",-1),je={class:"col-12 col-md-auto"},De={class:"form-check"},Ne=s("label",{for:"shotRadio2Pointer",class:"form-check-label"},"2 pointer",-1),We={class:"col-12 col-md-auto"},Je={class:"form-check"},Ge=s("label",{for:"shotRadio3Pointer",class:"form-check-label"},"3 pointer",-1),Xe=s("hr",null,null,-1),Ke={class:"form-check"},Qe=s("label",{for:"shotCheckboxMissed",class:"form-check-label"},"Shot was missed",-1),Ze={class:"modal-footer bg-light"},et={key:0,class:"spinner-border spinner-border-sm"},tt=d(" Record Shot "),st={expose:[],setup(l){const a=u("activePlayerList"),o=u("apiCall"),c=u("state"),i=u("newShot");m(null);const d=m(null),p=m(null),k=m(!1),S=m(0);async function M(){let e=await o(`/players/${S.value}/shots/new`,{method:"POST",body:JSON.stringify(i)}).then((e=>e.json()));c.players.find((e=>e.id==S.value)).shots=e.shots,i.x=0,i.y=0,i.missed=!0,i.game_id=void 0,i.points=0,S.value=0,p.value.click(),k.value=!1}return(l,o)=>{const u=ne;return e(),t("div",qe,[s("div",Be,[s("div",ze,[Le,s("div",Re,[s(u,{"show-circle":"",class:"p-1 bg-primary mb-2"}),Te,s("form",{ref:d,onSubmit:v(M,["prevent"]),id:"shotForm",onInput:o[7]||(o[7]=e=>k.value=d.value.checkValidity())},[s("fieldset",{disabled:n(c).requestPending},[Ae,w(s("input",{class:"form-control font-monospace",required:"",type:"number","onUpdate:modelValue":o[1]||(o[1]=e=>n(i).game_id=e),placeholder:"Game ID"},null,512),[[b,n(i).game_id]]),He,Oe,Ie,(e(!0),t(g,null,f(n(a),(l=>(e(),t("div",{class:"form-check",key:l.id},[w(s("input",{required:"",id:`shotRadioPlayer${l.id}`,class:"form-check-input",type:"radio",value:l.id,name:"player","onUpdate:modelValue":o[2]||(o[2]=e=>S.value=e)},null,8,["id","value"]),[[y,S.value]]),s("label",{for:`shotRadioPlayer${l.id}`,class:"form-check-label"},h(l.name),9,["for"])])))),128)),_e,Fe,s("div",Ue,[s("div",Ye,[s("div",Ee,[w(s("input",{id:"shotRadioFreeThrow",required:"",type:"radio",class:"form-check-input",value:"1","onUpdate:modelValue":o[3]||(o[3]=e=>n(i).points=e),name:"points"},null,512),[[y,n(i).points]]),$e])]),s("div",je,[s("div",De,[w(s("input",{id:"shotRadio2Pointer",required:"",type:"radio",class:"form-check-input",value:"2","onUpdate:modelValue":o[4]||(o[4]=e=>n(i).points=e),name:"points"},null,512),[[y,n(i).points]]),Ne])]),s("div",We,[s("div",Je,[w(s("input",{id:"shotRadio3Pointer",required:"",type:"radio",class:"form-check-input",value:"3","onUpdate:modelValue":o[5]||(o[5]=e=>n(i).points=e),name:"points"},null,512),[[y,n(i).points]]),Ge])])]),Xe,s("div",Ke,[w(s("input",{id:"shotCheckboxMissed",type:"checkbox",class:"form-check-input","onUpdate:modelValue":o[6]||(o[6]=e=>n(i).missed=e)},null,512),[[x,n(i).missed]]),Qe])],8,["disabled"])],40,["onSubmit"])]),s("div",Ze,[s("button",{disabled:!k.value||n(c).requestPending,class:"btn btn-primary",form:"shotForm",type:"submit"},[n(c).requestPending==`POST /players/${S.value}/shots/new`?(e(),t("div",et)):r("",!0),tt],8,["disabled"]),s("button",{disabled:n(c).requestPending,type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal","data-bs-target":"#shotModal",ref:p}," Cancel ",8,["disabled"])])])])])}}};const lt=i();l("data-v-4ad7df3f");const at={key:0,id:"mainScreenBar",class:"overflow-hidden bg-light border-bottom shadow-sm"},nt={class:"text-secondary text-center mt-2 pb-2"},ot={class:"text-truncate mb-1"},rt=d(" Logged in as "),ct={disabled:"",class:"btn btn-secondary"},it=d(" Settings "),dt={key:0,class:"spinner-border spinner-border-sm"},ut=d(" Logout "),mt={class:"container"},pt=s("h1",{class:"mt-2 text-secondary text-center"},[s("b",{class:"text-primary"},"FOHS"),d(" ScoreTracker ")],-1),ht={class:"text-center"},vt=s("div",{class:"text-muted text-center"},"Tap a spot on the court to record a shot there.",-1),wt=s("hr",null,null,-1),bt=d(" Players "),gt={key:0,class:"spinner-border spinner-border-sm"},ft={class:"row g-2 position-relative"};a();const yt={expose:[],setup(l){const a=u("state"),o=u("apiCall"),i=u("transitionListFix"),d=m(null),y=k({name:""}),x=k({x:0,y:0,points:0,teamId:0,missed:!0});S("courtWidth",549),S("courtHeight",320),S("newShot",x);const V=p((()=>(a.players||[]).filter((e=>!0===e.active))));S("activePlayerList",V);const q=m({});M((async function(){a.players=await o("/players").then((e=>e.json())),q.value=await o("/users/me").then((e=>e.json()))}));const B=p((function(){switch(V.value.length){case 0:return"danger";case 5:return"success";default:return"muted"}}));async function z(){let e=await o("/players/new",{method:"POST",body:JSON.stringify(y)}).then((e=>e.json()));y.name="",a.players.push(e)}async function L(){await o("/token/revoke",{method:"POST"}),localStorage.removeItem("score-tracker-session"),sessionStorage.removeItem("score-tracker-session"),a.token=null,a.currentScreen=Nt}function R(){V.value.length>0&&d.value.click()}return(l,o)=>{const u=ee,m=le,p=ne,x=ce,k=Ve,S=st;return e(),t(g,null,[s(c,{name:"main-screen-bar"},{default:lt((()=>[Object.keys(q.value).length>0?(e(),t("div",at,[s("div",nt,[s("div",ot,[rt,s("b",null,h(q.value.name),1)]),s("button",ct,[s(u),it]),s("button",{disabled:n(a).requestPending,class:"btn btn-danger ms-1",onClick:L},["POST /token/revoke"==n(a).requestPending?(e(),t("span",dt)):(e(),t(m,{key:1})),ut],8,["disabled"])])])):r("",!0)])),_:1}),s("div",mt,[pt,s("div",ht,[s(p,{class:"d-inline-block bg-dark p-1 mw-100 col-12 col-lg-6 mb-2 shadow",onClick:R})]),vt,wt,s("h2",null,[bt,s("small",{class:"text-"+n(B)},"("+h(n(V).length)+" active)",3)]),s("form",{onSubmit:v(z,["prevent"]),class:"input-group mb-2"},[w(s("input",{disabled:"POST /players/new"==n(a).requestPending,required:"",class:"form-control",placeholder:"New player name","onUpdate:modelValue":o[1]||(o[1]=e=>n(y).name=e)},null,8,["disabled"]),[[b,n(y).name,void 0,{trim:!0}]]),s("button",{disabled:!n(y).name||n(a).requestPending,type:"submit",class:"btn btn-primary",title:"Add a player"},["POST /players/new"==n(a).requestPending?(e(),t("span",gt)):(e(),t(x,{key:1}))],8,["disabled"])],40,["onSubmit"]),s("div",ft,[s(C,{name:"players",onBeforeLeave:n(i)},{default:lt((()=>[(e(!0),t(g,null,f(n(a).players,((s,l)=>(e(),t(k,P(s,{key:s.id,index:l}),null,16,["index"])))),128))])),_:1},8,["onBeforeLeave"])])]),s("button",{class:"d-none","data-bs-toggle":"modal","data-bs-target":"#shotModal",ref:d},null,512),s(S,{id:"shotModal"})],64)}},__scopeId:"data-v-4ad7df3f"};const xt=i();l("data-v-025e5de2");const kt={class:"h-100 d-flex align-items-center",novalidate:""},St=s("h1",{class:"fw-light text-center"},[d(" Welcome to "),s("br",{class:"d-md-none"}),s("b",null,"FOHS ScoreTracker")],-1),Mt=s("hr",null,null,-1),Ct=d(" Can't connect to server. "),Pt={class:"mb-3"},Vt={class:"form-label"},qt=d(" Email "),Bt=s("div",{class:"invalid-feedback"},"Account does not exist.",-1),zt={class:"mb-1 mb-md-2"},Lt={class:"form-label"},Rt=d(" Password "),Tt=s("span",{class:"invalid-feedback"},"Incorrect password.",-1),At={class:"d-flex justify-content-between mb-1 mb-md-2"},Ht={class:"form-check col-auto mb-0"},Ot=s("label",{class:"form-check-label",for:"rememberMe"},"Remember me",-1),It={class:"d-flex flex-wrap"},_t={key:0,class:"spinner-border spinner-border-sm"},Ft=d(" Login "),Ut=d(" Settings "),Yt={class:"collapse rounded border shadow-sm mt-2 p-2",id:"loginSettings"},Et={class:"text-danger text-center mb-1"},$t=d(" Developer Options"),jt={class:"form-label"},Dt=d(" API Base ");a();const Nt={expose:[],setup(l){const a=u("apiCall"),o=u("state"),i=m(null),d=m(""),p=m(""),h=m(!1),g=m(!1),f=m(!1),y=m(""),k=m(!1);async function S(){y.value="";let e=new FormData;e.append("username",d.value),e.append("password",p.value);try{var t=await a("/token",{method:"POST",body:e})}catch{g.value=!0}var s=await t.json();if(t.ok){o.token=s.access_token;const e=JSON.stringify({host:o.apiBase,token:o.token});k.value?localStorage.setItem("score-tracker-session",e):sessionStorage.setItem("score-tracker-session",e),h.value=!1}else s.detail.toLowerCase().includes("password")?y.value="password":y.value="email"}return M((function(){document.body.classList.remove("bg-light"),document.body.classList.add("bg-primary"),h.value=!0})),V((function(){document.body.classList.remove("bg-primary"),document.body.classList.add("bg-light")})),(l,a)=>{const u=T,m=O,M=F,C=E,P=D,V=J,B=K;return e(),t("div",kt,[s(c,{name:"welcome",onAfterLeave:a[8]||(a[8]=e=>n(o).currentScreen=q(yt))},{default:xt((()=>[h.value?(e(),t("form",{key:0,onInput:a[7]||(a[7]=e=>f.value=i.value.checkValidity()),onSubmit:v(S,["prevent"]),ref:i,class:"mx-auto bg-light border rounded p-3 shadow-lg col-11 col-md-auto"},[St,Mt,s(m,{class:"position-absolute top-0 start-0 end-0 m-1",type:"danger",modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e)},{default:xt((()=>[s(u,{class:"fs-5 me-2"}),Ct])),_:1},8,["modelValue"]),s("fieldset",{disabled:n(o).requestPending},[s("div",Pt,[s("label",Vt,[s(M),qt]),w(s("input",{required:"","onUpdate:modelValue":a[2]||(a[2]=e=>d.value=e),placeholder:"Enter your email",type:"email",class:["form-control",{"is-invalid":"email"==y.value}]},null,2),[[b,d.value]]),Bt]),s("div",zt,[s("label",Lt,[s(C),Rt]),w(s("input",{required:"",type:"password",placeholder:"Enter your password","onUpdate:modelValue":a[3]||(a[3]=e=>p.value=e),class:["form-control",{"is-invalid":"password"==y.value}]},null,2),[[b,p.value]]),Tt]),s("div",At,[s("div",Ht,[w(s("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>k.value=e),type:"checkbox",class:"form-check-input",id:"rememberMe"},null,512),[[x,k.value]]),Ot]),s("a",{href:"#",onClick:a[5]||(a[5]=e=>l.showRestToast=!0)},"reset password")]),s("div",It,[s("button",{disabled:!f.value||n(o).requestPending,type:"submit",class:"btn btn-primary col-md-auto col-12 mb-2 mb-md-0 me-0 me-md-2"},["POST /token"==n(o).requestPending?(e(),t("span",_t)):(e(),t(P,{key:1})),Ft],8,["disabled"]),s("button",{disabled:n(o).requestPending,type:"button",class:"btn btn-secondary col-md-auto col-12","data-bs-toggle":"collapse","data-bs-target":"#loginSettings"},[s(V),Ut],8,["disabled"])]),s("div",Yt,[s("div",Et,[s(u),$t]),s("label",jt,[s(B),Dt]),w(s("input",{type:"url",class:"form-control font-monospace",required:"","onUpdate:modelValue":a[6]||(a[6]=e=>n(o).apiBase=e)},null,512),[[b,n(o).apiBase]])])],8,["disabled"])],40,["onSubmit"])):r("",!0)])),_:1})])}},__scopeId:"data-v-025e5de2"};const Wt={key:1,class:"text-center text-secondary p-4"},Jt={expose:[],setup(s){const l=k({apiBase:"https://fohs-score-tracker.herokuapp.com",requestPending:null,token:null});async function a(e,t={}){t.headers||(t.headers={}),t.method||(t.method="GET"),l.token&&(t.headers.Authorization="Bearer "+l.token),l.requestPending=`${t.method} ${e}`;try{var s=await fetch(l.apiBase+e,t)}catch(a){throw l.requestPending=null,a}return l.requestPending=null,s}async function o(e){let t=JSON.parse(e.getItem("score-tracker-session"));if(null==t)return!1;let{host:s,token:n}=t;return l.apiBase=s,l.token=n,!!(await a("/users/me")).ok||(l.apiBase="https://fohs-score-tracker.herokuapp.com",l.token=null,!1)}return S("state",l),S("apiCall",a),S("transitionListFix",(function(e){const{marginLeft:t,marginTop:s,width:l,height:a}=window.getComputedStyle(e);e.style.left=e.offsetLeft-parseFloat(t,10)+"px",e.style.top=e.offsetTop-parseFloat(s,10)+"px",e.style.width=l,e.style.height=a})),M((async function(){await o(sessionStorage)||await o(localStorage)?l.currentScreen=q(yt):l.currentScreen=q(Nt)})),(s,a)=>null!=n(l).currentScreen?(e(),t(B(n(l).currentScreen),{key:0})):(e(),t("div",Wt,"FOHS ScoreTracker is loading, please wait..."))}};window.addEventListener("load",(function(){z(Jt).mount("#app")}));
