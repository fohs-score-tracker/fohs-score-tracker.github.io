import{o as e,c as t,a as s,p as l,b as n,u as a,r as o,d as r,T as i,w as c,e as d,f as u,v as m,n as p,g as h,h as v,i as w,j as g,t as b,F as f,k as x,l as y,m as k,q as S,s as M,x as C,y as P,z as L,A as V,B as R,C as q,D as z,E as B,G as A,H as T}from"./vendor.5f345fe8.js";const O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 576 512"},H=s("path",{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46s46-20.595 46-46s-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",fill:"currentColor"},null,-1);var I={name:"fa-solid-exclamation-triangle",render:function(s,l){return e(),t("svg",O,[H])}};const Y=c();l("data-v-f211a0be");const _=d("Something went wrong");n();const E={props:{type:String,modelValue:Boolean},emits:["update:modelValue"],setup(l,{emit:n}){const c=l;return(d,u)=>(e(),t(i,{name:"alert"},{default:Y((()=>[l.modelValue?(e(),t("div",{key:0,class:["alert alert-dismissible d-flex align-items-center",["alert-"+a(c).type]]},[o(d.$slots,"default",{},(()=>[_]),{}),s("button",{type:"button",class:"btn-close",onClick:u[1]||(u[1]=e=>n("update:modelValue",!1))})],2)):r("",!0)])),_:3}))},__scopeId:"data-v-f211a0be"},N={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},F=s("path",{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7c22.4 17.4 52.1 39.5 154.1 113.6c21.1 15.4 56.7 47.8 92.2 47.6c35.7.3 72-32.8 92.3-47.6c102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4c132.7-96.3 142.8-104.7 173.4-128.7c5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9c30.6 23.9 40.7 32.4 173.4 128.7c16.8 12.2 50.2 41.8 73.4 41.4z",fill:"currentColor"},null,-1);var U={name:"fa-solid-envelope",render:function(s,l){return e(),t("svg",N,[F])}};const $={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},j=s("path",{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176C160 78.798 238.797.001 335.999 0C433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48s-21.49-48-48-48s-48 21.49-48 48z",fill:"currentColor"},null,-1);var D={name:"fa-solid-key",render:function(s,l){return e(),t("svg",$,[j])}};const W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},G=s("path",{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z",fill:"currentColor"},null,-1);var J={name:"fa-solid-sign-in-alt",render:function(s,l){return e(),t("svg",W,[G])}};const K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},X=s("path",{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z",fill:"currentColor"},null,-1);var Q={name:"fa-solid-bars",render:function(s,l){return e(),t("svg",K,[X])}};const Z={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},ee=s("path",{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z",fill:"currentColor"},null,-1);var te={name:"fa-solid-database",render:function(s,l){return e(),t("svg",Z,[ee])}};function se(e={}){const{immediate:t=!0,onNeedRefresh:s,onOfflineReady:l}=e,n=u(!1),a=u(!1);return{updateServiceWorker:function(e={}){const{immediate:t=!1,onNeedRefresh:s,onOfflineReady:l}=e;let n,a;if("serviceWorker"in navigator){n=new m("/service-worker.js",{scope:"/"}),n.addEventListener("activated",(e=>{e.isUpdate||null==l||l()}));{const e=()=>{null==s||s()};n.addEventListener("waiting",e),n.addEventListener("externalwaiting",e)}n.register({immediate:t}).then((e=>a=e))}return async(e=!0)=>{e&&(null==n||n.addEventListener("controlling",(e=>{e.isUpdate&&window.location.reload()}))),a&&a.waiting&&await p(a.waiting,{type:"SKIP_WAITING"})}}({immediate:t,onNeedRefresh(){n.value=!0,null==s||s()},onOfflineReady(){a.value=!0,null==l||l()}}),offlineReady:a,needRefresh:n}}const le={setup(s){se();const l=u(!1);return(s,n)=>h((e(),t("div",null,null,512)),[[v,l.value]])}},ne={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 496 512"},ae=s("path",{d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88s-88-39.4-88-88s39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2c18.8-35.4 55.6-59.8 98.5-59.8c2.4 0 4.8.4 7.1 1.1c13 4.2 26.6 6.9 40.9 6.9c14.3 0 28-2.7 40.9-6.9c2.3-.7 4.7-1.1 7.1-1.1c42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z",fill:"currentColor"},null,-1);var oe={name:"fa-solid-user-circle",render:function(s,l){return e(),t("svg",ne,[ae])}};const re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},ie=s("path",{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z",fill:"currentColor"},null,-1);var ce={name:"fa-solid-sign-out-alt",render:function(s,l){return e(),t("svg",re,[ie])}};const de={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},ue=s("path",{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14c-11.1-35.6-30-67.8-54.7-94.6c-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7c-36.7-8.2-74.3-7.8-109.2 0c-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3c-24.7 26.7-43.6 58.9-54.7 94.6c-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14c11.1 35.6 30 67.8 54.7 94.6c3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7c36.7 8.2 74.3 7.8 109.2 0c5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3c24.7-26.7 43.6-58.9 54.7-94.6c1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80s80 35.9 80 80s-35.9 80-80 80z",fill:"currentColor"},null,-1);var me={name:"fa-solid-cog",render:function(s,l){return e(),t("svg",de,[ue])}};l("data-v-17ed247d");const pe={id:"sideMenuButton",class:"text-muted p-2 position-fixed start-0 top-0","data-bs-toggle":"offcanvas",href:"#sideMenu"},he={class:"offcanvas offcanvas-start",tabindex:"-1",id:"sideMenu"},ve=s("div",{class:"offcanvas-header bg-light border-bottom"},[s("h5",{class:"offcanvas-title fw-bold"},"Menu"),s("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),we={class:"p-2"},ge={class:"mb-2 fs-4 fw-bold text-truncate text-center"},be={class:"row gy-2"},fe={class:"col-12 d-grid"},xe={key:0,class:"spinner-border spinner-border-sm"},ye=d(" Logout "),ke={class:"col-12 d-grid"},Se={disabled:"",class:"btn btn-secondary"},Me=d(" Settings ");n();const Ce={setup(l){const n=w("apiCall"),o=w("state"),r=u({});async function i(){await n("/token/revoke",{method:"POST"}),localStorage.removeItem("score-tracker-session"),sessionStorage.removeItem("score-tracker-session"),o.token=null,o.currentScreen=Ws}return g((async function(){r.value=await n("/users/me").then((e=>e.json()))})),(l,n)=>{const c=Q,u=oe,m=ce,p=me;return e(),t(f,null,[s("a",pe,[s(c)]),s("div",he,[ve,s("div",we,[s("div",ge,[s(u,{class:"text-secondary"}),d(" "+b(r.value.name),1)]),s("div",be,[s("div",fe,[s("button",{disabled:a(o).requestPending,class:"btn btn-danger",onClick:i},["POST /token/revoke"==a(o).requestPending?(e(),t("span",xe)):(e(),t(m,{key:1})),ye],8,["disabled"])]),s("div",ke,[s("button",Se,[s(p),Me])])])])])],64)}},__scopeId:"data-v-17ed247d"};const Pe=s("image",{href:"/court.png",width:"100%",height:"100%"},null,-1),Le={props:{requireActive:Boolean,hideCircles:Boolean,ignoreClicks:Boolean,circles:Array},emits:["click"],setup(s,{emit:l}){const n=s,o=w("activePlayerList"),i=u(null);function c(e){if(!n.ignoreClicks){var t=e.target.getBoundingClientRect(),s=getComputedStyle(i.value),a=e.clientX-t.left,o=e.clientY-t.top;a/=parseInt(s.getPropertyValue("width")),o/=parseInt(s.getPropertyValue("height")),n.circles[0].x=Math.round(100*a),n.circles[0].y=Math.round(50*o),l("click")}}return(l,n)=>(e(),t("div",null,[(e(),t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 549 320",ref:i,onClick:c,style:{cursor:s.ignoreClicks?"initial":(!s.requireActive||a(o).length)>0?"crosshair":"not-allowed"}},[Pe,s.hideCircles?r("",!0):(e(!0),t(f,{key:0},x(s.circles,(s=>(e(),t("circle",{key:s,cx:s.x/100*549,cy:s.y/50*320,r:"10",fill:`var(${!1===s.missed?"--bs-success":"--bs-primary"})`,class:"pe-none"},null,8,["cx","cy","fill"])))),128))],12,["viewBox"]))]))}},Ve={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 640 512"},Re=s("path",{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z",fill:"currentColor"},null,-1);var qe={name:"fa-solid-user-plus",render:function(s,l){return e(),t("svg",Ve,[Re])}};const ze={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 640 512"},Be=s("path",{d:"M624 208H432c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z",fill:"currentColor"},null,-1);var Ae={name:"fa-solid-user-minus",render:function(s,l){return e(),t("svg",ze,[Be])}};const Te={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},Oe=s("path",{d:"M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5L288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z",fill:"currentColor"},null,-1);var He={name:"fa-solid-chart-area",render:function(s,l){return e(),t("svg",Te,[Oe])}};const Ie={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},Ye=s("path",{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",fill:"currentColor"},null,-1);var _e={name:"fa-solid-minus",render:function(s,l){return e(),t("svg",Ie,[Ye])}};const Ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 448 512"},Ne=s("path",{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",fill:"currentColor"},null,-1);var Fe={name:"fa-solid-plus",render:function(s,l){return e(),t("svg",Ee,[Ne])}};const Ue={class:"col-md-6"},$e={class:"border bg-white p-1 clearfix rounded shadow-sm"},je={class:"lead"},De=d(" Points: "),We={key:0},Ge=d(" Shots: made "),Je=d(" out of "),Ke={key:1},Xe=d("Shots: "),Qe=s("b",{class:"text-muted"},"None",-1),Ze={class:"row gx-1"},et={class:"col d-grid"},tt=d(" Delete "),st={class:"col d-grid"},lt=d(" Stats "),nt={class:"col d-grid"},at={key:0},ot=d(" Deactivate "),rt={key:1},it=d(" Activate "),ct={props:{name:String,id:Number,index:Number,shots:Array},setup(l){const n=l,o=w("state");w("apiCall");const r=w("activePlayerList"),i=y((function(){let e={total:0,shots:0,madeShots:0};for(let t of n.shots)e.shots++,t.missed||(e.madeShots++,e.total+=t.points);return e})),c=y((()=>o.players[n.index]));function d(){c.value.active=!c.value.active}return(n,u)=>{const m=Ae,p=He,h=_e,v=Fe;return e(),t("div",Ue,[s("div",$e,[s("span",je,b(l.name),1),s("div",null,[De,s("b",null,b(a(i).total),1)]),a(i).shots>0?(e(),t("div",We,[Ge,s("b",null,b(a(i).madeShots),1),Je,s("b",null,b(a(i).shots),1)])):(e(),t("div",Ke,[Xe,Qe])),s("div",Ze,[s("div",et,[s("button",{disabled:a(o).requestPending,class:"btn btn-sm btn-danger","data-bs-toggle":"modal","data-bs-target":`#delete-player-${l.id}`},[s(m),tt],8,["disabled","data-bs-target"])]),s("div",st,[s("button",{class:"btn btn-sm btn-info","data-bs-toggle":"modal","data-bs-target":`#stats-player-${l.id}`},[s(p),lt],8,["data-bs-target"])]),s("div",nt,[s("button",{class:["btn btn-sm",a(c).active?"btn-success":"btn-secondary"],disabled:a(o).requestPending||a(r).length>=5&&!a(c).active,onClick:d},[a(c).active?(e(),t("div",at,[s(h),ot])):(e(),t("div",rt,[s(v),it]))],10,["disabled"])])])])])}}},dt={class:"modal fade"},ut={class:"modal-dialog"},mt={class:"modal-content"},pt=s("div",{class:"modal-header bg-secondary text-white"},[s("h5",{class:"modal-title"},"Record Shot")],-1),ht={class:"modal-body"},vt=s("p",{class:"text-primary text-center"},"The red circle shows where the shot was made from.",-1),wt=s("b",null,"Game ID",-1),gt=s("div",{class:"form-text"},"TODO: select game from dropdown",-1),bt=s("hr",null,null,-1),ft=s("b",null,"Which player threw the shot?",-1),xt=s("hr",null,null,-1),yt=s("b",null,"What kind of shot was it?",-1),kt={class:"row"},St={class:"col-12 col-md-auto"},Mt={class:"form-check"},Ct=s("label",{for:"shotRadioFreeThrow",class:"form-check-label"},"Free throw",-1),Pt={class:"col-12 col-md-auto"},Lt={class:"form-check"},Vt=s("label",{for:"shotRadio2Pointer",class:"form-check-label"},"2 pointer",-1),Rt={class:"col-12 col-md-auto"},qt={class:"form-check"},zt=s("label",{for:"shotRadio3Pointer",class:"form-check-label"},"3 pointer",-1),Bt=s("hr",null,null,-1),At={class:"form-check"},Tt=s("label",{for:"shotCheckboxMissed",class:"form-check-label"},"Shot was missed",-1),Ot={class:"modal-footer bg-light"},Ht={key:0,class:"spinner-border spinner-border-sm"},It=d(" Record Shot "),Yt={setup(l){const n=w("activePlayerList"),o=w("apiCall"),i=w("state"),c=w("newShot");u(null);const d=u(null),m=u(null),p=u(!1),v=u(0);async function g(){let e=await o(`/players/${v.value}/shots/new`,{method:"POST",body:JSON.stringify(c)}).then((e=>e.json()));i.players.find((e=>e.id==v.value)).shots=e.shots,c.x=0,c.y=0,c.missed=!0,c.game_id=void 0,c.points=0,v.value=0,m.value.click(),p.value=!1}return(l,o)=>{const u=Le;return e(),t("div",dt,[s("div",ut,[s("div",mt,[pt,s("div",ht,[s(u,{class:"p-1 bg-primary mb-2",circles:[a(c)]},null,8,["circles"]),vt,s("form",{ref:d,onSubmit:k(g,["prevent"]),id:"shotForm",onInput:o[7]||(o[7]=e=>p.value=d.value.checkValidity())},[s("fieldset",{disabled:a(i).requestPending},[wt,h(s("input",{class:"form-control font-monospace",required:"",type:"number","onUpdate:modelValue":o[1]||(o[1]=e=>a(c).game_id=e),placeholder:"Game ID"},null,512),[[S,a(c).game_id]]),gt,bt,ft,(e(!0),t(f,null,x(a(n),(l=>(e(),t("div",{class:"form-check",key:l.id},[h(s("input",{required:"",id:`shotRadioPlayer${l.id}`,class:"form-check-input",type:"radio",value:l.id,name:"player","onUpdate:modelValue":o[2]||(o[2]=e=>v.value=e)},null,8,["id","value"]),[[M,v.value]]),s("label",{for:`shotRadioPlayer${l.id}`,class:"form-check-label"},b(l.name),9,["for"])])))),128)),xt,yt,s("div",kt,[s("div",St,[s("div",Mt,[h(s("input",{id:"shotRadioFreeThrow",required:"",type:"radio",class:"form-check-input",value:"1","onUpdate:modelValue":o[3]||(o[3]=e=>a(c).points=e),name:"points"},null,512),[[M,a(c).points]]),Ct])]),s("div",Pt,[s("div",Lt,[h(s("input",{id:"shotRadio2Pointer",required:"",type:"radio",class:"form-check-input",value:"2","onUpdate:modelValue":o[4]||(o[4]=e=>a(c).points=e),name:"points"},null,512),[[M,a(c).points]]),Vt])]),s("div",Rt,[s("div",qt,[h(s("input",{id:"shotRadio3Pointer",required:"",type:"radio",class:"form-check-input",value:"3","onUpdate:modelValue":o[5]||(o[5]=e=>a(c).points=e),name:"points"},null,512),[[M,a(c).points]]),zt])])]),Bt,s("div",At,[h(s("input",{id:"shotCheckboxMissed",type:"checkbox",class:"form-check-input","onUpdate:modelValue":o[6]||(o[6]=e=>a(c).missed=e)},null,512),[[C,a(c).missed]]),Tt])],8,["disabled"])],40,["onSubmit"])]),s("div",Ot,[s("button",{disabled:!p.value||a(i).requestPending,class:"btn btn-primary",form:"shotForm",type:"submit"},[a(i).requestPending==`POST /players/${v.value}/shots/new`?(e(),t("div",Ht)):r("",!0),It],8,["disabled"]),s("button",{disabled:a(i).requestPending,type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal","data-bs-target":"#shotModal",ref:m}," Cancel ",8,["disabled"])])])])])}}},_t={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512"},Et=s("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69L432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z",fill:"currentColor"},null,-1);var Nt={name:"fa-solid-check",render:function(s,l){return e(),t("svg",_t,[Et])}};const Ft={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},Ut=s("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"},null,-1);var $t={name:"fa-solid-times",render:function(s,l){return e(),t("svg",Ft,[Ut])}};const jt={class:"modal-dialog"},Dt={class:"modal-content"},Wt={class:"modal-header text-white bg-secondary justify-content-start"},Gt=s("div",{class:"modal-body"},[d(" Are you sure you want to "),s("b",{class:"text-danger"},"delete"),d(" this player? ")],-1),Jt={class:"modal-footer bg-light"},Kt={key:0,class:"spinner-border spinner-border-sm"},Xt=d(" Delete "),Qt=d(" Cancel "),Zt={props:{index:Number,name:String,id:Number},setup(l){const n=l,o=w("apiCall"),r=w("state"),i=u(null);async function c(){await o(`/players/${n.id}`,{method:"DELETE"}),r.players.splice(n.index,1),i.value.click()}return(n,o)=>{const u=Ae,m=Nt,p=$t;return e(),t("div",{class:"modal fade",id:`delete-player-${l.id}`},[s("div",jt,[s("div",Dt,[s("div",Wt,[s(u,{class:"me-1"}),d(" Delete "+b(l.name),1)]),Gt,s("div",Jt,[s("button",{class:"btn btn btn-primary",onClick:c,disabled:a(r).requestPending},[a(r).requestPending==`DELETE /players/${l.id}`?(e(),t("span",Kt)):(e(),t(m,{key:1})),Xt],8,["disabled"]),s("button",{class:"btn btn btn-secondary","data-bs-dismiss":"modal",ref:i,disabled:a(r).requestPending},[s(p),Qt],8,["disabled"])])])])],8,["id"])}}},es={class:"modal-dialog"},ts={class:"modal-content"},ss={class:"modal-header text-white bg-secondary justify-content-start"},ls={class:"modal-body"},ns={class:"table table-striped"},as=s("thead",null,[s("tr",null,[s("th",null,"Shot type"),s("th",null,"Made shots"),s("th",null,"Total")])],-1),os=s("td",null,"Free throw",-1),rs=s("td",null,"Two pointer",-1),is=s("td",null,"Three pointer",-1),cs={class:"modal-footer bg-light"},ds=d(" Close "),us={props:{index:Number,name:String,id:Number,shots:Array},setup(l){const n=l;w("apiCall");const o=w("state"),r=u(null);function i(e,t){let s=0;for(let l of n.shots)l.points!=e||!t&&l.missed||s++;return s}return(n,c)=>{const u=He,m=Le,p=$t;return e(),t("div",{class:"modal fade",id:`stats-player-${l.id}`},[s("div",es,[s("div",ts,[s("div",ss,[s(u,{class:"me-1"}),d(" Stats for "+b(l.name),1)]),s("div",ls,[s(m,{class:"bg-secondary p-1 mb-2","ignore-clicks":"",circles:l.shots},null,8,["circles"]),s("table",ns,[as,s("tbody",null,[s("tr",null,[os,s("td",null,b(i(1,!1)),1),s("td",null,b(i(1,!0)),1)]),s("tr",null,[rs,s("td",null,b(i(2,!1)),1),s("td",null,b(i(2,!0)),1)]),s("tr",null,[is,s("td",null,b(i(3,!1)),1),s("td",null,b(i(3,!0)),1)])])])]),s("div",cs,[s("button",{class:"btn btn btn-secondary","data-bs-dismiss":"modal",ref:r,disabled:a(o).requestPending},[s(p),ds],8,["disabled"])])])])],8,["id"])}}};const ms=c();l("data-v-82e20182");const ps={class:"container pb-3"},hs=s("h1",{class:"mt-2 text-secondary text-center"},[s("b",{class:"text-primary"},"FOHS"),d(" ScoreTracker ")],-1),vs={class:"text-center"},ws=s("div",{class:"text-muted text-center"},"Tap a spot on the court to record a shot there.",-1),gs=s("hr",null,null,-1),bs=d(" Players "),fs={key:0,class:"spinner-border spinner-border-sm"},xs={class:"row g-2 position-relative"};n();const ys={setup(l){const n=w("state"),o=w("apiCall"),r=w("transitionListFix"),i=u(null),c=P({name:""}),d=P({x:0,y:0,points:0,teamId:0,missed:!0});L("newShot",d);const m=y((()=>(n.players||[]).filter((e=>!0===e.active))));L("activePlayerList",m),g((async function(){n.players=await o("/players").then((e=>e.json()))}));const p=y((function(){switch(m.value.length){case 0:return"danger";case 5:return"success";default:return"muted"}}));async function v(){let e=await o("/players/new",{method:"POST",body:JSON.stringify(c)}).then((e=>e.json()));c.name="",n.players.push(e)}function M(){m.value.length>0&&i.value.click()}return(l,o)=>{const u=Ce,w=Le,g=qe,y=ct,C=Yt,P=Zt,L=us;return e(),t(f,null,[s(u),s("div",ps,[hs,s("div",vs,[s(w,{"require-active":"","hide-circles":"",circles:[a(d)],class:"d-inline-block bg-dark p-1 mw-100 col-12 col-lg-6 mb-2 shadow",onClick:M},null,8,["circles"])]),ws,gs,s("h2",null,[bs,s("small",{class:"text-"+a(p)},"("+b(a(m).length)+" active)",3)]),s("form",{onSubmit:k(v,["prevent"]),class:"input-group mb-2"},[h(s("input",{disabled:"POST /players/new"==a(n).requestPending,required:"",class:"form-control",placeholder:"New player name","onUpdate:modelValue":o[1]||(o[1]=e=>a(c).name=e)},null,8,["disabled"]),[[S,a(c).name,void 0,{trim:!0}]]),s("button",{disabled:!a(c).name||a(n).requestPending,type:"submit",class:"btn btn-primary",title:"Add a player"},["POST /players/new"==a(n).requestPending?(e(),t("span",fs)):(e(),t(g,{key:1}))],8,["disabled"])],40,["onSubmit"]),s("div",xs,[s(V,{name:"players",onBeforeLeave:a(r)},{default:ms((()=>[(e(!0),t(f,null,x(a(n).players,((s,l)=>(e(),t(y,R(s,{key:s.id,index:l}),null,16,["index"])))),128))])),_:1},8,["onBeforeLeave"])])]),s("button",{class:"d-none","data-bs-toggle":"modal","data-bs-target":"#shotModal",ref:i},null,512),s(C,{id:"shotModal"}),(e(!0),t(f,null,x(a(n).players,((s,l)=>(e(),t(P,R(s,{key:s.id,index:l}),null,16,["index"])))),128)),(e(!0),t(f,null,x(a(n).players,((s,l)=>(e(),t(L,R(s,{key:s.id,index:l}),null,16,["index"])))),128))],64)}},__scopeId:"data-v-82e20182"};const ks=c();l("data-v-a803bdc6");const Ss={class:"h-100 d-flex align-items-center",novalidate:""},Ms=s("h1",{class:"fw-light text-center"},[d(" Welcome to "),s("br",{class:"d-md-none"}),s("b",null,"FOHS ScoreTracker")],-1),Cs=s("hr",null,null,-1),Ps=d(" Can't connect to server. "),Ls={class:"mb-3"},Vs={class:"form-label"},Rs=d(" Email "),qs=s("div",{class:"invalid-feedback"},"Account does not exist.",-1),zs={class:"mb-1 mb-md-2"},Bs={class:"form-label"},As=d(" Password "),Ts=s("span",{class:"invalid-feedback"},"Incorrect password.",-1),Os={class:"d-flex justify-content-between mb-1 mb-md-2"},Hs={class:"form-check col-auto mb-0"},Is=s("label",{class:"form-check-label",for:"rememberMe"},"Remember me",-1),Ys={class:"d-flex flex-wrap"},_s={key:0,class:"spinner-border spinner-border-sm"},Es=d(" Login "),Ns=d(" Settings "),Fs={class:"collapse rounded border shadow-sm mt-2 p-2",id:"loginSettings"},Us={class:"text-danger text-center mb-1"},$s=d(" Developer Options"),js={class:"form-label"},Ds=d(" API Base ");n();const Ws={setup(l){const n=w("apiCall"),o=w("state"),c=u(null),d=u(""),m=u(""),p=u(!1),v=u(!1),b=u(!1),f=u(""),x=u(!1);async function y(){f.value="";let e=new FormData;e.append("username",d.value),e.append("password",m.value);try{var t=await n("/token",{method:"POST",body:e})}catch{v.value=!0}var s=await t.json();if(t.ok){o.token=s.access_token;const e=JSON.stringify({host:o.apiBase,token:o.token});x.value?localStorage.setItem("score-tracker-session",e):sessionStorage.setItem("score-tracker-session",e),p.value=!1}else s.detail.toLowerCase().includes("password")?f.value="password":f.value="email"}return g((function(){document.body.classList.remove("bg-light"),document.body.classList.add("bg-primary"),p.value=!0})),q((function(){document.body.classList.remove("bg-primary"),document.body.classList.add("bg-light")})),(l,n)=>{const u=I,w=E,g=U,M=D,P=J,L=Q,V=te,R=le;return e(),t("div",Ss,[s(i,{name:"welcome",onAfterLeave:n[8]||(n[8]=e=>a(o).currentScreen=z(ys))},{default:ks((()=>[p.value?(e(),t("form",{key:0,onInput:n[7]||(n[7]=e=>b.value=c.value.checkValidity()),onSubmit:k(y,["prevent"]),ref:c,class:"mx-auto bg-light border rounded p-3 shadow-lg col-11 col-md-auto"},[Ms,Cs,s(w,{class:"position-absolute top-0 start-0 end-0 m-1",type:"danger",modelValue:v.value,"onUpdate:modelValue":n[1]||(n[1]=e=>v.value=e)},{default:ks((()=>[s(u,{class:"fs-5 me-2"}),Ps])),_:1},8,["modelValue"]),s("fieldset",{disabled:a(o).requestPending},[s("div",Ls,[s("label",Vs,[s(g),Rs]),h(s("input",{required:"","onUpdate:modelValue":n[2]||(n[2]=e=>d.value=e),placeholder:"Enter your email",type:"email",class:["form-control",{"is-invalid":"email"==f.value}]},null,2),[[S,d.value]]),qs]),s("div",zs,[s("label",Bs,[s(M),As]),h(s("input",{required:"",type:"password",placeholder:"Enter your password","onUpdate:modelValue":n[3]||(n[3]=e=>m.value=e),class:["form-control",{"is-invalid":"password"==f.value}]},null,2),[[S,m.value]]),Ts]),s("div",Os,[s("div",Hs,[h(s("input",{"onUpdate:modelValue":n[4]||(n[4]=e=>x.value=e),type:"checkbox",class:"form-check-input",id:"rememberMe"},null,512),[[C,x.value]]),Is]),s("a",{href:"#",onClick:n[5]||(n[5]=e=>l.showRestToast=!0)},"reset password")]),s("div",Ys,[s("button",{disabled:!b.value||a(o).requestPending,type:"submit",class:"btn btn-primary col-md-auto col-12 mb-2 mb-md-0 me-0 me-md-2"},["POST /token"==a(o).requestPending?(e(),t("span",_s)):(e(),t(P,{key:1})),Es],8,["disabled"]),s("button",{disabled:a(o).requestPending,type:"button",class:"btn btn-secondary col-md-auto col-12","data-bs-toggle":"collapse","data-bs-target":"#loginSettings"},[s(L),Ns],8,["disabled"])]),s("div",Fs,[s("div",Us,[s(u),$s]),s("label",js,[s(V),Ds]),h(s("input",{type:"url",class:"form-control font-monospace",required:"","onUpdate:modelValue":n[6]||(n[6]=e=>a(o).apiBase=e)},null,512),[[S,a(o).apiBase]])])],8,["disabled"])],40,["onSubmit"])):r("",!0)])),_:1}),s(R)])}},__scopeId:"data-v-a803bdc6"};const Gs={key:1,class:"d-flex flex-column align-items-center justify-content-center h-100 bg-primary bg-gradient text-white"},Js=s("div",{class:"fw-bold fs-5"},"FOHS ScoreTracker is loading...",-1),Ks=s("span",{class:"mt-2 spinner-border"},null,-1),Xs={setup(l){const n=P({apiBase:"https://fohs-score-tracker.herokuapp.com",requestPending:null,token:null});async function o(e,t={}){t.headers||(t.headers={}),t.method||(t.method="GET"),n.token&&(t.headers.Authorization="Bearer "+n.token),n.requestPending=`${t.method} ${e}`;try{var s=await fetch(n.apiBase+e,t)}catch(l){throw n.requestPending=null,l}return n.requestPending=null,s}async function r(e){let t=JSON.parse(e.getItem("score-tracker-session"));if(null==t)return!1;let{host:s,token:l}=t;return n.apiBase=s,n.token=l,!!(await o("/users/me")).ok||(n.apiBase="https://fohs-score-tracker.herokuapp.com",n.token=null,!1)}return L("state",n),L("apiCall",o),L("transitionListFix",(function(e){const{marginLeft:t,marginTop:s,width:l,height:n}=window.getComputedStyle(e);e.style.left=e.offsetLeft-parseFloat(t,10)+"px",e.style.top=e.offsetTop-parseFloat(s,10)+"px",e.style.width=l,e.style.height=n})),g((async function(){await r(sessionStorage)||await r(localStorage)?n.currentScreen=z(ys):n.currentScreen=z(Ws)})),(l,o)=>{const r=A("reload-prompt");return e(),t(f,null,[s(r),null!=a(n).currentScreen?(e(),t(B(a(n).currentScreen),{key:0})):(e(),t("div",Gs,[Js,Ks]))],64)}}};window.addEventListener("load",(function(){T(Xs).mount("#app")}));
